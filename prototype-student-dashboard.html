<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindWave ‚Äì Student Dashboard</title>
    <meta name="description" content="MindWave student home ‚Äî your XP, courses, games and announcements in one place.">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="student-theme.css">
    <!-- Apply saved theme before paint to avoid flash -->
    <script>
        (function () {
            const t = localStorage.getItem('mw_theme') || 'dark';
            document.documentElement.setAttribute('data-theme', t);
        })();
    </script>
    <style>
        /* Page-specific tweaks */
        .greeting-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 22px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .greeting-name {
            font-size: 22px;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .greeting-date {
            font-size: 13px;
            color: var(--muted);
            margin-top: 2px;
        }

        .greeting-actions {
            display: flex;
            gap: 10px;
        }

        /* Stats row under greeting */
        .stats-pill-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .stat-pill {
            display: flex;
            align-items: center;
            gap: 6px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 14px;
            font-size: 13px;
            font-weight: 600;
        }

        .stat-pill-icon {
            font-size: 16px;
        }

        .stat-pill-val {
            font-size: 16px;
            font-weight: 800;
        }

        .stat-pill-lbl {
            font-size: 12px;
            color: var(--muted);
            font-weight: 400;
        }

        /* Game grid overrides for the Games panel (dynamic) */
        #gameFeed {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        /* Notification dropdown position */
        .mw-notif-wrap {
            position: relative;
        }

        /* Profile toggle in sidebar footer (used by homepage.js) */
        #profileToggle {
            cursor: pointer;
            width: 100%;
        }

        #profileDropdown {
            display: none;
        }

        #profileDropdown.show {
            display: block;
        }
    </style>
</head>

<body>
    <div class="mw-shell">

        <!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ -->
        <aside class="mw-sidebar">
            <div class="mw-logo">
                <div class="mw-logo-icon">üåä</div>
                <span class="mw-logo-text">MindWave</span>
                <span class="mw-logo-badge">BETA</span>
            </div>

            <!-- Main Nav -->
            <nav class="mw-nav-section">
                <div class="mw-nav-label">Main</div>
                <a href="homepage.html" class="mw-nav-item active">
                    <span class="mw-nav-icon">‚ö°</span> Dashboard
                </a>
                <a href="student-courses.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üìö</span> My Courses
                </a>
                <a href="student-timetable.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üìÖ</span> Timetable
                </a>
                <a href="student-performance.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üìä</span> Performance
                </a>
                <a href="student-leaderboard.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üèÜ</span> Leaderboard
                    <span class="mw-nav-badge">üî•</span>
                </a>
            </nav>

            <div class="mw-divider"></div>

            <!-- Engage Nav -->
            <nav class="mw-nav-section">
                <div class="mw-nav-label">Engage</div>
                <a href="student-game.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üéÆ</span> Play Games
                </a>
                <a href="student-community.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üë•</span> Community
                </a>
                <a href="student-achievements.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üéñÔ∏è</span> Achievements
                </a>
                <a href="student-upcoming-events.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üì¢</span> Events
                </a>
            </nav>

            <div class="mw-divider"></div>

            <!-- Tools Nav -->
            <nav class="mw-nav-section">
                <div class="mw-nav-label">Tools</div>
                <a href="student-code-practice.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üíª</span> Code Practice
                </a>
                <a href="student-ai-tutor.html" class="mw-nav-item">
                    <span class="mw-nav-icon">ü§ñ</span> AI Tutor
                </a>
                <a href="student-reports.html" class="mw-nav-item">
                    <span class="mw-nav-icon">üìÑ</span> Reports
                </a>
                <a href="student-settings.html" class="mw-nav-item">
                    <span class="mw-nav-icon">‚öôÔ∏è</span> Settings
                </a>
            </nav>

            <!-- Sidebar footer with profile -->
            <div class="mw-sidebar-footer">
                <!-- profileToggle and profileDropdown IDs required by homepage.js -->
                <div id="profileToggle" class="mw-user-card" style="position:relative;">
                    <div class="mw-avatar" id="avatarInitials">--</div>
                    <div>
                        <div class="mw-user-name" id="sidebarUserName">Loading‚Ä¶</div>
                        <div class="mw-user-role">Student</div>
                    </div>
                    <span class="mw-user-more">‚ãØ</span>

                    <!-- profileDropdown required by homepage.js -->
                    <div id="profileDropdown" class="mw-profile-dropdown">
                        <a href="student-profile.html">üë§ My Profile</a>
                        <a href="student-settings.html">‚öôÔ∏è Settings</a>
                        <div style="height:1px;background:var(--border);margin:4px 0;"></div>
                        <button id="signOutBtn">üî¥ Sign Out</button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
        <div class="mw-main">

            <!-- TOPBAR -->
            <header class="mw-topbar">
                <div class="mw-breadcrumb">Dashboard / <span>Home</span></div>

                <div class="mw-search">
                    <span>üîç</span>
                    <input type="text" placeholder="Search courses, games‚Ä¶" id="globalSearch">
                </div>

                <div class="mw-topbar-actions">
                    <!-- Notification bell ‚Äî notificationBtn & notificationBadge IDs required by homepage.js -->
                    <div class="mw-notif-wrap">
                        <div class="mw-icon-btn" id="notificationBtn" title="Notifications">
                            üîî
                            <span class="mw-notif-dot hidden" id="notificationBadge"></span>
                        </div>
                        <!-- notificationDropdown required by homepage.js -->
                        <div class="mw-notif-dropdown" id="notificationDropdown"></div>
                    </div>

                    <!-- settingsBtn required by homepage.js -->
                    <div class="mw-icon-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</div>

                    <!-- Theme toggle -->
                    <button class="mw-theme-toggle" id="themeToggle" title="Toggle light/dark mode"
                        aria-label="Toggle theme">
                        <span class="mw-toggle-moon">üåô</span>
                        <span class="mw-toggle-sun">‚òÄÔ∏è</span>
                    </button>
                </div>
            </header>

            <!-- CONTENT -->
            <div class="mw-content">

                <!-- ‚îÄ‚îÄ GREETING ROW ‚îÄ‚îÄ -->
                <div class="greeting-row">
                    <div>
                        <div class="greeting-name">Good evening, <span id="greetingName">Student</span> üëã</div>
                        <div class="greeting-date" id="greetingDate"></div>
                    </div>
                    <div class="greeting-actions">
                        <a class="mw-btn mw-btn-ghost" href="student-timetable.html">üìÖ Timetable</a>
                        <a class="mw-btn mw-btn-primary" href="student-game.html">üéÆ Play Games</a>
                    </div>
                </div>

                <!-- ‚îÄ‚îÄ KPI CARDS ‚îÄ‚îÄ -->
                <div class="mw-kpi-grid">
                    <!-- XP -->
                    <div class="mw-kpi-card">
                        <div class="mw-kpi-header">
                            <span class="mw-kpi-label">Total XP</span>
                            <span class="mw-kpi-icon">‚ö°</span>
                        </div>
                        <div class="mw-kpi-value" style="color:var(--accent-2);">4,820</div>
                        <div class="mw-kpi-change up">‚ñ≤ 12% <span class="mw-kpi-sub">vs last week</span></div>
                        <div class="mw-sparkline">
                            <div class="mw-spark-bar" style="height:40%"></div>
                            <div class="mw-spark-bar" style="height:55%"></div>
                            <div class="mw-spark-bar" style="height:45%"></div>
                            <div class="mw-spark-bar" style="height:70%"></div>
                            <div class="mw-spark-bar" style="height:60%"></div>
                            <div class="mw-spark-bar" style="height:85%"></div>
                            <div class="mw-spark-bar hi" style="height:100%"></div>
                        </div>
                    </div>

                    <!-- Courses -->
                    <div class="mw-kpi-card">
                        <div class="mw-kpi-header">
                            <span class="mw-kpi-label">Courses Enrolled</span>
                            <span class="mw-kpi-icon">üìö</span>
                        </div>
                        <div class="mw-kpi-value" style="color:var(--green);" id="courseCount">‚Äî</div>
                        <div class="mw-kpi-change up">‚ñ≤ Active this semester</div>
                        <div class="mw-sparkline">
                            <div class="mw-spark-bar" style="height:60%"></div>
                            <div class="mw-spark-bar" style="height:60%"></div>
                            <div class="mw-spark-bar" style="height:80%"></div>
                            <div class="mw-spark-bar" style="height:80%"></div>
                            <div class="mw-spark-bar" style="height:80%"></div>
                            <div class="mw-spark-bar" style="height:100%"></div>
                            <div class="mw-spark-bar hi" style="height:100%;background:var(--green)"></div>
                        </div>
                    </div>

                    <!-- Games Played -->
                    <div class="mw-kpi-card">
                        <div class="mw-kpi-header">
                            <span class="mw-kpi-label">Games Played</span>
                            <span class="mw-kpi-icon">üéÆ</span>
                        </div>
                        <div class="mw-kpi-value" style="color:var(--orange);" id="gamesPlayed">‚Äî</div>
                        <div class="mw-kpi-change up">‚ñ≤ Keep it up!</div>
                        <div class="mw-sparkline">
                            <div class="mw-spark-bar" style="height:30%"></div>
                            <div class="mw-spark-bar" style="height:50%"></div>
                            <div class="mw-spark-bar" style="height:40%"></div>
                            <div class="mw-spark-bar" style="height:70%"></div>
                            <div class="mw-spark-bar" style="height:85%"></div>
                            <div class="mw-spark-bar" style="height:75%"></div>
                            <div class="mw-spark-bar hi" style="height:100%;background:var(--orange)"></div>
                        </div>
                    </div>

                    <!-- Rank -->
                    <div class="mw-kpi-card">
                        <div class="mw-kpi-header">
                            <span class="mw-kpi-label">Class Rank</span>
                            <span class="mw-kpi-icon">üèÜ</span>
                        </div>
                        <div class="mw-kpi-value" style="color:var(--pink);" id="studentRank">#‚Äî</div>
                        <div class="mw-kpi-change up">‚ñ≤ Climbing!</div>
                        <div class="mw-sparkline">
                            <div class="mw-spark-bar" style="height:80%"></div>
                            <div class="mw-spark-bar" style="height:70%"></div>
                            <div class="mw-spark-bar" style="height:90%"></div>
                            <div class="mw-spark-bar" style="height:75%"></div>
                            <div class="mw-spark-bar" style="height:85%"></div>
                            <div class="mw-spark-bar" style="height:80%"></div>
                            <div class="mw-spark-bar hi" style="height:100%;background:var(--pink)"></div>
                        </div>
                    </div>
                </div>

                <!-- ‚îÄ‚îÄ MAIN DASH GRID ‚îÄ‚îÄ -->
                <div class="mw-dash-grid">

                    <!-- LEFT COLUMN -->
                    <div class="mw-dash-col">

                        <!-- ANNOUNCEMENTS PANEL -->
                        <div class="mw-panel">
                            <div class="mw-panel-header">
                                <div class="mw-panel-title">üì¢ Announcements</div>
                                <a href="student-notifications.html" class="mw-panel-action">View all ‚Üí</a>
                            </div>
                            <!-- announcementFeed ID required by homepage.js -->
                            <div class="mw-panel-body">
                                <div id="announcementFeed" class="mw-feed-list">
                                    <div class="empty-state">Loading announcements‚Ä¶ üì®</div>
                                </div>
                            </div>
                        </div>

                        <!-- GAMES PANEL -->
                        <div class="mw-panel">
                            <div class="mw-panel-header">
                                <div class="mw-panel-title">üéÆ Games Playground</div>
                                <a href="student-game.html" class="mw-panel-action">All games ‚Üí</a>
                            </div>
                            <!-- gameFeed ID required by homepage.js -->
                            <div class="mw-panel-body">
                                <div id="gameFeed">
                                    <div class="empty-state">Loading games‚Ä¶ üéÆ</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT COLUMN -->
                    <div class="mw-dash-col">

                        <!-- XP LEVEL RING -->
                        <div class="mw-panel">
                            <div class="mw-panel-header">
                                <div class="mw-panel-title">‚ö° XP Level</div>
                            </div>
                            <div class="mw-panel-body">
                                <div style="text-align:center;margin-bottom:14px;">
                                    <svg width="120" height="120" viewBox="0 0 120 120">
                                        <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.07)"
                                            stroke-width="10" />
                                        <circle cx="60" cy="60" r="50" fill="none" stroke="url(#xpGrad)"
                                            stroke-width="10" stroke-linecap="round" stroke-dasharray="314"
                                            stroke-dashoffset="70" transform="rotate(-90 60 60)" />
                                        <defs>
                                            <linearGradient id="xpGrad" x1="0" y1="0" x2="1" y2="0">
                                                <stop offset="0%" stop-color="#6366f1" />
                                                <stop offset="100%" stop-color="#a78bfa" />
                                            </linearGradient>
                                        </defs>
                                        <text x="60" y="54" text-anchor="middle" font-size="22" font-weight="800"
                                            fill="currentColor">12</text>
                                        <text x="60" y="70" text-anchor="middle" font-size="11"
                                            fill="#8b90a8">Level</text>
                                    </svg>
                                </div>
                                <div class="mw-xp-bar-wrap">
                                    <div class="mw-xp-bar-labels">
                                        <span>4,820 XP</span>
                                        <span>5,000 XP</span>
                                    </div>
                                    <div class="mw-xp-track">
                                        <div class="mw-xp-fill" style="width:78%"></div>
                                    </div>
                                    <div style="text-align:center;margin-top:8px;font-size:12px;color:var(--muted);">180
                                        XP to Level 13</div>
                                </div>
                            </div>
                        </div>

                        <!-- UPDATES PANEL -->
                        <div class="mw-panel" style="flex:1;">
                            <div class="mw-panel-header">
                                <div class="mw-panel-title">üìò Updates</div>
                                <a href="student-updates.html" class="mw-panel-action">View all ‚Üí</a>
                            </div>
                            <!-- updateFeed ID required by homepage.js -->
                            <div class="mw-panel-body">
                                <div id="updateFeed" class="mw-feed-list">
                                    <div class="empty-state">Progress updates from your teachers will appear here. üìò
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- UPCOMING EVENTS -->
                        <div class="mw-panel">
                            <div class="mw-panel-header">
                                <div class="mw-panel-title">üìÖ Upcoming</div>
                                <a href="student-upcoming-events.html" class="mw-panel-action">View all ‚Üí</a>
                            </div>
                            <div class="mw-panel-body">
                                <div class="mw-upcoming-list">
                                    <div class="mw-upcoming-item">
                                        <div class="mw-upcoming-date">
                                            <div class="mw-upcoming-day" style="color:var(--red);">22</div>
                                            <div class="mw-upcoming-mon">Feb</div>
                                        </div>
                                        <div>
                                            <div class="mw-upcoming-title">Data Structures Quiz</div>
                                            <div class="mw-upcoming-meta">
                                                üïô 10:00 AM
                                                <span class="mw-chip"
                                                    style="background:rgba(244,63,94,0.15);color:var(--red);">Quiz</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mw-upcoming-item">
                                        <div class="mw-upcoming-date">
                                            <div class="mw-upcoming-day" style="color:var(--accent-2);">24</div>
                                            <div class="mw-upcoming-mon">Feb</div>
                                        </div>
                                        <div>
                                            <div class="mw-upcoming-title">Live Class ‚Äî DBMS</div>
                                            <div class="mw-upcoming-meta">
                                                üïí 3:00 PM
                                                <span class="mw-chip"
                                                    style="background:rgba(99,102,241,0.15);color:var(--accent-2);">Live</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mw-upcoming-item">
                                        <div class="mw-upcoming-date">
                                            <div class="mw-upcoming-day" style="color:var(--orange);">28</div>
                                            <div class="mw-upcoming-mon">Feb</div>
                                        </div>
                                        <div>
                                            <div class="mw-upcoming-title">OS Assignment #3 Due</div>
                                            <div class="mw-upcoming-meta">
                                                üïõ 11:59 PM
                                                <span class="mw-chip"
                                                    style="background:rgba(245,158,11,0.15);color:var(--orange);">Assignment</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end mw-dash-grid -->

            </div>
            <!-- end mw-content -->
        </div>
        <!-- end mw-main -->
    </div>
    <!-- end mw-shell -->

    <script>
        // ‚îÄ‚îÄ THEME TOGGLE ‚îÄ‚îÄ
        const _root = document.documentElement;
        const _toggleBtn = document.getElementById('themeToggle');
        const _saved = localStorage.getItem('mw_theme') || 'dark';
        _root.setAttribute('data-theme', _saved);
        _toggleBtn.addEventListener('click', () => {
            const next = _root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            _root.setAttribute('data-theme', next);
            localStorage.setItem('mw_theme', next);
        });

        // ‚îÄ‚îÄ GREETING ‚îÄ‚îÄ
        (function () {
            const name = localStorage.getItem('firstName') || 'Student';
            document.getElementById('greetingName').textContent = name;
            document.getElementById('sidebarUserName').textContent = name;

            // Avatar initials
            const parts = (localStorage.getItem('name') || name).trim().split(' ');
            const initials = parts.length > 1
                ? parts[0][0] + parts[parts.length - 1][0]
                : name.substring(0, 2);
            document.getElementById('avatarInitials').textContent = initials.toUpperCase();

            // Date greeting
            const now = new Date();
            const h = now.getHours();
            const greeting = h < 12 ? 'Good morning' : h < 17 ? 'Good afternoon' : 'Good evening';
            document.querySelector('.greeting-name').innerHTML =
                `${greeting}, <span>${name}</span> ${h < 12 ? 'üåÖ' : h < 17 ? '‚òÄÔ∏è' : 'üåô'}`;

            const dateStr = now.toLocaleDateString('en-IN', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
            document.getElementById('greetingDate').textContent = dateStr;
        })();

        // ‚îÄ‚îÄ ACTIVE NAV HIGHLIGHT ‚îÄ‚îÄ
        document.querySelectorAll('.mw-nav-item').forEach(item => {
            if (item.getAttribute('href') === window.location.pathname.split('/').pop()) {
                item.classList.add('active');
            }
        });
    </script>

    <script src="homepage.js"></script>
    <script src="chatbot.js"></script>
</body>

</html>